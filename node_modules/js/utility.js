function showModal() {
    $('#modal').show();
}

function readSingleFile(evt) {
    //Retrieve the first (and only!) File from the FileList object
    var f = evt.target.files[0];

    if (f) {
        var r = new FileReader();
        r.onload = function (e) {
            var contents = e.target.result;
            loadedFile = contents.split('\n');
            playbackMode();
        }
        r.readAsText(f);
    } else {
        alert("Failed to load file");
    }
    $('#modal').hide()

}

function playbackMode (){
    $('#loadBtn').hide();
    $( "#slider-range-min" ).slider({
      range: "min",
      value: 0,
      min: 1,
      max: loadedFile.length - 1,
      slide: function( event, ui ) {
          playing = false;
          playCount = ui.value;
      }
    });
    $('.play_controls').show();
}

function playFile() {
    var $playBtn = $('#playBtn');
    
    if(playing){
        playing = false;
        $playBtn.text('Play');
    } else {
        playing = true;
        $playBtn.text('Pause');
    }
}

function resetFile() {
    playing = false;
    playCount = 0;
    $( "#slider-range-min" ).slider({value: playCount});
}

function initGUI() {
    document.getElementById('fileinput').addEventListener('change', readSingleFile, false);
    
}
